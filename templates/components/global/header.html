{% load static %}
<header class="asdsadsasad">
  <link rel="stylesheet" href="{% static 'css/global/header.css' %}">
  <link rel="stylesheet" href="{% static 'css/modal.css' %}">
  <nav>
    <a href="/"><h1 class="logo">BARAKA</h1></a>
    <ul class="list">
      <li><a id="openModalBtn">{% if request.session.salon.name %}{{request.session.salon.name}}{% else %}Выберите салон{% endif %}</a></li>
      <li><a href="{% url 'masters' %}">Мастера</a></li>
      <li><a href="{% url 'about' %}">О нас</a></li>
      <li><a href="#" id="openUserModal">{% if request.user.is_authenticated %}Профиль{% else %}Войти{% endif %}</a></li>
    </ul>
    <button class="menu" onclick="toggleMenu()">Menu</button>
  </nav>
  {% include 'components/global/modal.html' %}
  <div id="UserModal" class="modal">
    <div class="modal-content user-content">
      <div class="tab">
        
        {% if request.user.is_authenticated %}
            <div class="site-button btn-one tablinks" onclick="openTab(event, 'profile')" id="defaultOpen"><a>Профиль</a></div>
            <div class="site-button btn-one tablinks" onclick="openTab(event, 'settings')"><a>Настройки</a></div>
            <div class="site-button btn-one tablinks" onclick="openTab(event, 'logout')"><a>Выход</a></div>
        {% else %}
            <div class="site-button btn-one tablinks" onclick="openTab(event, 'login')" id="defaultOpen"><a href="#">Вход</a></div>
            <div class="site-button btn-one tablinks" onclick="openTab(event, 'register')"><a href="#">Регистрация</a></div>
        {% endif %}
      </div>
      <div id="profile" class="tabcontent">
        <div class="profile">
            <div class="tab-title">
                <h1>Профиль</h1>
            </div>
            <div class="tab-content">
                <div class="user-info">
                    <div class="column">
                    <p>Логин: {{ request.user.username }}</p>
                    <p>Email: <a href="mailto:{{ request.user.email }}">{{ request.user.email }}</a></p>
                    <p>Телефон: {%if request.user.phone %} <a href="tel:{{ request.user.phone }}">{{ request.user.phone }}</a> {%else%}Не указан{% endif %}</p>
                    </div>
                    <div class="column">
                        <p>Регистрация: {{ request.user.date_joined }}</p>
                        <p>Последний вход: {{ request.user.last_login }}</p>
                    </div>
    
                </div>
            </div>
        </div>
      </div>
      <div id="settings" class="tabcontent">
        <h2>Настройки</h2>
      </div>
      <div id="logout" class="tabcontent">
        <div class="tab-title">
            <h2>Выйти из аккаунта</h2>
        </div>
        <div class="tab-content">
            <form method="post" action="{% url 'user_logout' %}">
                {% csrf_token %}
                <button type="submit" class="submit-button"><span>Выйти</span><em></em></button>
            </form>
        </div>
      </div>
      <div id="login" class="tabcontent">
        <h2>Вход</h2>
        <form method="post" action="{% url 'user_login' %}">
            {% csrf_token %}
            {{login_form.as_p}}
            <button type="submit" class="submit-button"><span>Войти</span><em></em></button>
        </form>
      </div>
  
      <div id="register" class="tabcontent">
        <h2>Регистрация</h2>
        <form>
          <input type="text" placeholder="Имя">
          <input type="text" placeholder="Email">
          <input type="password" placeholder="Пароль">
          <button type="submit">Зарегистрироваться</button>
        </form>
      </div>
      <span id="close" class="close">&times;</span>
    </div>
  </div>
  <script src="{% static 'js/header.js' %}"></script>
  <script src="{% static 'js/modal.js' %}"></script>
<script>
    // Получаем модальное окно
var modal = document.getElementById("UserModal");

// Получаем кнопку, которая открывает модальное окно
var btn = document.getElementById("openUserModal");

// Получаем элемент <span>, который закрывает модальное окно
var span = document.getElementById("close");

// Когда пользователь кликает на кнопку, открываем модальное окно
btn.onclick = function() {
  modal.style.display = "block";
}

// Когда пользователь кликает на <span> (x), закрываем модальное окно
span.onclick = function() {
  modal.style.display = "none";
}

// Когда пользователь щелкает в любом месте за пределами модального окна, закрываем его
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

// Функция для открытия вкладки
function openTab(evt, tabName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}

// Получаем элемент с id="defaultOpen" и кликаем на него
document.getElementById("defaultOpen").click();
</script>
<style>
    .column {
        float: left;
        width: 50%;
        box-sizing: border-box;
    }
    
    .main-info::after {
        content: "";
        display: table;
        clear: both;
    }

    .profile {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    .user-content {
        display: flex;
        justify-content: space-between;
        gap: 10px;
    }
    .tab {
        display: flex;
        flex-direction: column;
        width: 30%;
    }
      
      .tab div:hover {
        background-color: #aaa;
      }
      
      .tab div.active {
        background-color: #ccc;
      }
      
      .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
        width: 100%;
      }

      @media screen and (max-width: 750px) {
        .tab {
            width: 100%;
        }
        .user-content {
            flex-direction: column;
        }
      }

</style>
</header>